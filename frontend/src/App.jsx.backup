// frontend/src/App.jsx
import React from 'react';
import { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';
import './App.css';

// Context Providers
import { AuthProvider } from './context/AuthContext';
import { BusinessPlanProvider } from './context/BusinessPlanContext';

// Components
import Header from './components/common/Header';
import Sidebar from './components/common/Sidebar';

// Public Pages
import HomePage from './pages/public/HomePage';
import AboutPage from './pages/public/AboutPage';
import LoginPage from './pages/auth/LoginPage';
import RegisterPage from './pages/auth/RegisterPage';

// App Pages
import Dashboard from './pages/app/Dashboard';

// Strategic Analysis Pages
import ProblemAnalysis from './pages/app/strategic/ProblemAnalysis';
import CanvasMethod from './pages/app/strategic/CanvasMethod';
import PestelAnalysis from './pages/app/strategic/PestelAnalysis';
import PorterForces from './pages/app/strategic/PorterForces';
import Benchmarking from './pages/app/strategic/Benchmarking';
import ValueChain from './pages/app/strategic/ValueChain';
import SwotAnalysis from './pages/app/strategic/SwotAnalysis';
import CriticalFactors from './pages/app/strategic/CriticalFactors';
import CompetitiveAdvantage from './pages/app/strategic/CompetitiveAdvantage';

// Direction Strategy Pages
import MissionVision from './pages/app/direction/MissionVision';
import StrategicObjectives from './pages/app/direction/StrategicObjectives';

// Other modules would go here...

function App() {
  return (
    <AuthProvider>
      <BusinessPlanProvider>
        <Router>
          <div className="App">
            <Routes>
              {/* Public Routes */}
              <Route path="/" element={<HomePage />} />
              <Route path="/about" element={<AboutPage />} />
              <Route path="/login" element={<LoginPage />} />
              <Route path="/register" element={<RegisterPage />} />

              {/* Protected App Routes */}
              <Route path="/app" element={<AppLayout />}>
                <Route index element={<Navigate to="/app/dashboard" replace />} />
                <Route path="dashboard" element={<Dashboard />} />
                
                {/* Strategic Analysis Routes */}
                <Route path="strategic/problem-analysis" element={<ProblemAnalysis />} />
                <Route path="strategic/canvas-method" element={<CanvasMethod />} />
                <Route path="strategic/pestel-analysis" element={<PestelAnalysis />} />
                <Route path="strategic/porter-forces" element={<PorterForces />} />
                <Route path="strategic/benchmarking" element={<Benchmarking />} />
                <Route path="strategic/value-chain" element={<ValueChain />} />
                <Route path="strategic/swot-analysis" element={<SwotAnalysis />} />
                <Route path="strategic/critical-factors" element={<CriticalFactors />} />
                <Route path="strategic/competitive-advantage" element={<CompetitiveAdvantage />} />

                {/* Direction Strategy Routes */}
                <Route path="direction/mission-vision" element={<MissionVision />} />
                <Route path="direction/strategic-objectives" element={<StrategicObjectives />} />

                {/* Other module routes would go here */}
              </Route>

              {/* 404 Route */}
              <Route path="*" element={<div>PÃ¡gina no encontrada</div>} />
            </Routes>
          </div>
        </Router>
      </BusinessPlanProvider>
    </AuthProvider>
  );
}

// Layout component for protected app routes
const AppLayout = ({ children }) => {
  return (
    <div className="min-h-screen bg-gray-50 flex">
      {/* Sidebar */}
      <div className="hidden md:flex md:w-64 md:flex-col">
        <Sidebar />
      </div>

      {/* Main content */}
      <div className="flex-1 flex flex-col">
        {/* Header */}
        <Header />
        
        {/* Page content */}
        <main className="flex-1 overflow-auto">
          <div className="container mx-auto px-4 py-8">
            {children}
          </div>
        </main>
      </div>
    </div>
  );
};

export default App;